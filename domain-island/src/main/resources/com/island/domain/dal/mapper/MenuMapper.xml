<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
    PUBLIC "-//ibatis.apache.org//DTD Mapper 3.0//EN"
    "http://ibatis.apache.org/dtd/ibatis-3-mapper.dtd">

<mapper namespace="com.island.domain.dal.mapper.MenuMapper">
	<resultMap id="MenuRslMap" type="com.island.domain.model.Menu">		
		
			<id property="id" column="id" />
			<result property="menuName" column="menu_name" />
			<result property="menuUrl" column="menu_url" />
			<result property="menuParent" column="menu_parent" />
			<result property="createTime" column="create_time" />
			<result property="valid" column="valid" />
	</resultMap>

	<select id="queryById" parameterType="java.util.Map" resultMap="MenuRslMap">
		SELECT
			id,
			menu_name,
			menu_url,
			menu_parent,
			create_time,
			valid
		FROM
			menu
		<where>
			and id=#{id}
		</where>
			limit 1
	</select>

	<select id="queryByModel" parameterType="com.island.domain.model.Menu" resultMap="MenuRslMap">		
		SELECT
			id,
			menu_name,
			menu_url,
			menu_parent,
			create_time,
			valid
		FROM
			menu
		<where>			
			<if test="id !=  null">
				and id=#{id}
			</if>
			<if test="menuName !=  null">			        
				and menu_name=#{menuName}
			</if>
			<if test="menuUrl !=  null">			        
				and menu_url=#{menuUrl}
			</if>
			<if test="menuParent !=  null">			        
				and menu_parent=#{menuParent}
			</if>
			<if test="createTime !=  null">			        
				and create_time=#{createTime}
			</if>
			<if test="valid !=  null">			        
				and valid=#{valid}
			</if>
		</where>
		
	</select>
		
	<select id="queryByMap" parameterType="java.util.Map" resultMap="MenuRslMap">				
		SELECT
			id,
			menu_name,
			menu_url,
			menu_parent,
			create_time,
			valid
		FROM
			menu
		<where>
			<if test="id !=  null">
				and id=#{id}
			</if>
			<if test="menuName !=  null">			        
				and menu_name=#{menuName}
			</if>
			<if test="menuUrl !=  null">			        
				and menu_url=#{menuUrl}
			</if>
			<if test="menuParent !=  null">			        
				and menu_parent=#{menuParent}
			</if>
			<if test="createTime !=  null">			        
				and create_time=#{createTime}
			</if>
			<if test="valid !=  null">			        
				and valid=#{valid}
			</if>
		</where>
		
	</select>
	
	<select id="countByModel" parameterType="com.island.domain.model.Menu" resultType="java.lang.Integer">	
		SELECT
			count(*)
		FROM
			menu
		<where>			
			<if test="id !=  null">
				and id=#{id}
			</if>
			<if test="menuName !=  null">			        
				and menu_name=#{menuName}
			</if>
			<if test="menuUrl !=  null">			        
				and menu_url=#{menuUrl}
			</if>
			<if test="menuParent !=  null">			        
				and menu_parent=#{menuParent}
			</if>
			<if test="createTime !=  null">			        
				and create_time=#{createTime}
			</if>
			<if test="valid !=  null">			        
				and valid=#{valid}
			</if>
		</where>
		
	</select>
	
	<select id="countByMap" parameterType="java.util.Map" resultType="java.lang.Integer">				
		SELECT
			count(*)
		FROM
			menu
		<where>			
			<if test="id !=  null">
				and id=#{id}
			</if>
			<if test="menuName !=  null">			        
				and menu_name=#{menuName}
			</if>
			<if test="menuUrl !=  null">			        
				and menu_url=#{menuUrl}
			</if>
			<if test="menuParent !=  null">			        
				and menu_parent=#{menuParent}
			</if>
			<if test="createTime !=  null">			        
				and create_time=#{createTime}
			</if>
			<if test="valid !=  null">			        
				and valid=#{valid}
			</if>
		</where>
				
	</select>
	
	<select id="pageQuery" parameterType="com.jcl.core.dal.Page" resultMap="MenuRslMap" fetchSize="15">
		SELECT
			id,
			menu_name,
			menu_url,
			menu_parent,
			create_time,
			valid
		FROM
			menu
		<where>
			<if test="params !=  null">
				<if test="params.id !=  null">
					and id=#{params.id}
				</if>
				<if test="params.menuName !=  null">
					and menu_name=#{params.menuName}
				</if>
				<if test="params.menuUrl !=  null">
					and menu_url=#{params.menuUrl}
				</if>
				<if test="params.menuParent !=  null">
					and menu_parent=#{params.menuParent}
				</if>
				<if test="params.createTime !=  null">
					and create_time=#{params.createTime}
				</if>
				<if test="params.valid !=  null">
					and valid=#{params.valid}
				</if>
			</if>
		</where>
			limit #{start},#{end}	
	</select>

	<insert id="insert" parameterType="com.island.domain.model.Menu" useGeneratedKeys="true" keyProperty="id">
		INSERT INTO	menu
			(id,menu_name,menu_url,menu_parent,create_time,valid)
			VALUES(#{id},#{menuName},#{menuUrl},#{menuParent},#{createTime},#{valid})		
	</insert>
	
	<update id="update" parameterType="com.island.domain.model.Menu">
		update 
			menu
		<set> 
			<if test="id !=  null">
				id=#{id},
			</if>
			<if test="menuName !=  null">			        
				menu_name=#{menuName},
			</if>
			<if test="menuUrl !=  null">			        
				menu_url=#{menuUrl},
			</if>
			<if test="menuParent !=  null">			        
				menu_parent=#{menuParent},
			</if>
			<if test="createTime !=  null">			        
				create_time=#{createTime},
			</if>
			<if test="valid !=  null">			        
				valid=#{valid},
			</if>
		</set>
		<where>			
			<if test="id !=  null">
				and id=#{id}
			</if>
			<if test="menuName !=  null">			        
				and menu_name=#{menuName}
			</if>
			<if test="menuUrl !=  null">			        
				and menu_url=#{menuUrl}
			</if>
			<if test="menuParent !=  null">			        
				and menu_parent=#{menuParent}
			</if>
			<if test="createTime !=  null">			        
				and create_time=#{createTime}
			</if>
			<if test="valid !=  null">			        
				and valid=#{valid}
			</if>
		</where>
		
	</update>
	<update id="updateByMap" parameterType="java.util.Map">
		update 
			menu
		<set> 
			<if test="id !=  null">
				id=#{id},
			</if>
			<if test="menuName !=  null">			        
				menu_name=#{menuName},
			</if>
			<if test="menuUrl !=  null">			        
				menu_url=#{menuUrl},
			</if>
			<if test="menuParent !=  null">			        
				menu_parent=#{menuParent},
			</if>
			<if test="createTime !=  null">			        
				create_time=#{createTime},
			</if>
			<if test="valid !=  null">			        
				valid=#{valid},
			</if>
		</set>
		<where>
			<if test="id !=  null">
				and id=#{id}
			</if>
		</where>
		
	</update>
	
	<update id="cmplxUpdate" parameterType="java.util.Map">
		update 
			menu
		<set>
			<if test="updNewMap.id !=  null">
				id=#{updNewMap.id},
			</if>
			<if test="updNewMap.menuName !=  null">
				menu_name=#{updNewMap.menuName},
			</if>
			<if test="updNewMap.menuUrl !=  null">
				menu_url=#{updNewMap.menuUrl},
			</if>
			<if test="updNewMap.menuParent !=  null">
				menu_parent=#{updNewMap.menuParent},
			</if>
			<if test="updNewMap.createTime !=  null">
				create_time=#{updNewMap.createTime},
			</if>
			<if test="updNewMap.valid !=  null">
				valid=#{updNewMap.valid},
			</if>
		</set>
		<where>
			<if test="updCondMap.id !=  null">
				and id=#{updCondMap.id}
			</if>
			<if test="updCondMap.menuName !=  null">
				and menu_name=#{updCondMap.menuName}
			</if>
			<if test="updCondMap.menuUrl !=  null">
				and menu_url=#{updCondMap.menuUrl}
			</if>
			<if test="updCondMap.menuParent !=  null">
				and menu_parent=#{updCondMap.menuParent}
			</if>
			<if test="updCondMap.createTime !=  null">
				and create_time=#{updCondMap.createTime}
			</if>
			<if test="updCondMap.valid !=  null">
				and valid=#{updCondMap.valid}
			</if>
		</where>
		
	</update>
	
	<delete id="delete" parameterType="com.island.domain.model.Menu">		
		DELETE
		FROM
			menu 
		<where>
			<if test="id !=  null">
				and id=#{id}
			</if>
			<if test="menuName !=  null">			        
				and menu_name=#{menuName}
			</if>
			<if test="menuUrl !=  null">			        
				and menu_url=#{menuUrl}
			</if>
			<if test="menuParent !=  null">			        
				and menu_parent=#{menuParent}
			</if>
			<if test="createTime !=  null">			        
				and create_time=#{createTime}
			</if>
			<if test="valid !=  null">			        
				and valid=#{valid}
			</if>
		</where>
		
	</delete>
	<delete id="deleteByMap" parameterType="java.util.Map">		
		DELETE
		FROM
			menu 
		<where>
			<if test="id !=  null">
				and id=#{id}
			</if>
			<if test="menuName !=  null">			        
				and menu_name=#{menuName}
			</if>
			<if test="menuUrl !=  null">			        
				and menu_url=#{menuUrl}
			</if>
			<if test="menuParent !=  null">			        
				and menu_parent=#{menuParent}
			</if>
			<if test="createTime !=  null">			        
				and create_time=#{createTime}
			</if>
			<if test="valid !=  null">			        
				and valid=#{valid}
			</if>
		</where>
		
	</delete>
	
	<select id="queryByIds" parameterType="java.util.Map" resultMap="MenuRslMap">				
		SELECT
			id,
			menu_name,
			menu_url,
			menu_parent,
			create_time,
			valid
		FROM
			menu
		WHERE
			id in ${ids}  and valid = #{valid}
		
	</select>
</mapper>
